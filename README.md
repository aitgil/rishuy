# 🚗 בוט טלגרם לחיפוש רכבים ישראליים

בוט טלגרם מתקדם המאפשר חיפוש מהיר ונוח של נתוני רכב ישראליים באמצעות מספר לוחית רישוי. הבוט משתמש ב-API הרשמי של הממשלה הישראלית ומספק ממשק ידידותי בעברית.

## ✨ תכונות עיקריות

### 🔍 חיפוש רכבים
- חיפוש מהיר לפי מספר לוחית רישוי (7-8 ספרות)
- נתונים מלאים: יצרן, דגם, שנת ייצור, צבע, סוג דלק ועוד
- בדיקת תו נכה אוטומטית
- תמיכה בפורמטים שונים (123-45-678, 12345678)

### 🎛️ הגדרות מותאמות אישית
- בחירת שדות תצוגה (הצגת רק הנתונים הרלוונטיים)
- תמיכה בעברית ואנגלית
- מצב תצוגה קומפקטי
- שמירת העדפות אישיות

### 🛡️ אבטחה וביצועים
- הגבלת קצב בקשות (Rate Limiting)
- ולידציה מלאה של קלט משתמש
- מערכת Cache לביצועים מהירים
- הגנה מפני spam ושימוש לרעה

### 💬 ממשק משתמש מתקדם
- כפתורים אינטראקטיביים בעברית
- עדכון הודעות דינמי (ללא spam)
- הודעות שגיאה ברורות ומועילות
- תפריטי ניווט אינטואיטיביים

## 🚀 התקנה מהירה

### דרישות מערכת
- Node.js 18+
- Docker & Docker Compose (מומלץ)
- טוקן בוט טלגרם

### התקנה בסיסית
```bash
# שכפול הפרויקט
git clone <repository-url>
cd telegram-vehicle-bot

# התקנת תלויות
npm install

# הגדרת משתני סביבה
cp .env.example .env
# ערכו את .env עם הטוקן שלכם

# הפעלה
npm start
```

### התקנה עם Docker (מומלץ)
```bash
# הגדרת משתני סביבה
cp .env.example .env
# ערכו את .env עם הטוקן שלכם

# הפעלה
./scripts/start.sh

# בדיקת סטטוס
./scripts/status.sh
```

## 📖 שימוש

### פקודות בסיסיות
- `/start` - התחלת השימוש בבוט
- `/help` - הצגת עזרה והוראות שימוש
- `/settings` - הגדרות הבוט

### חיפוש רכב
פשוט שלחו מספר לוחית רישוי:
```
12345678
123-45-678
123 45 678
```

### דוגמאות מספרי רישוי לבדיקה
- `12345678` - דוגמה למספר רישוי תקין
- `1234567` - דוגמה נוספת למספר רישוי תקין

## 🛠️ פיתוח

### סקריפטים זמינים
```bash
npm run dev          # הפעלה במצב פיתוח עם nodemon
npm test             # הרצת כל הבדיקות
npm run test:watch   # הרצת בדיקות במצב watch
npm run lint         # בדיקת איכות קוד
npm run lint:fix     # תיקון אוטומטי של בעיות קוד
npm run format       # עיצוב קוד עם Prettier
```

### מבנה הפרויקט
```
src/
├── bot/             # מנהל הבוט הראשי
├── handlers/        # מטפלי הודעות (פקודות, חיפוש, הגדרות)
├── services/        # שירותים (API, הגדרות משתמש)
├── models/          # מודלי נתונים
├── utils/           # כלים עזר (cache, validation, rate limiting)
└── index.js         # נקודת כניסה ראשית

tests/
├── unit/            # בדיקות יחידה
├── integration/     # בדיקות אינטגרציה
└── e2e/            # בדיקות מקצה לקצה
```

### הוספת תכונות חדשות
1. צרו branch חדש: `git checkout -b feature/new-feature`
2. כתבו בדיקות לתכונה החדשה
3. מימשו את התכונה
4. הריצו את כל הבדיקות: `npm test`
5. בדקו איכות קוד: `npm run lint`
6. צרו Pull Request

## 🔧 הגדרות מתקדמות

### משתני סביבה
```env
# חובה
TELEGRAM_BOT_TOKEN=your_bot_token_here

# אופציונלי
NODE_ENV=production
LOG_LEVEL=info
API_TIMEOUT=5000
API_RETRY_ATTEMPTS=3
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX_REQUESTS=10
```

### הגדרות Cache
הבוט משתמש במערכת cache מתקדמת:
- **TTL**: 5 דקות לתוצאות חיפוש
- **גודל מקסימלי**: 500 רשומות
- **אסטרטגיית פינוי**: LRU (Least Recently Used)

### Rate Limiting
הגנה מפני spam:
- **חלון זמן**: דקה אחת
- **מקסימום בקשות**: 10 לדקה למשתמש
- **הודעות ברורות** למשתמש בעת חריגה

## 📊 מעקב וניטור

### בדיקת בריאות
```bash
# בדיקה מהירה
./scripts/status.sh

# בדיקה מפורטת
curl http://localhost:3000/health
```

### לוגים
```bash
# צפייה בלוגים בזמן אמת
docker-compose logs -f telegram-vehicle-bot

# לוגים מהיום האחרון
docker-compose logs --since=24h telegram-vehicle-bot
```

### מטריקות
הבוט מספק מטריקות מפורטות:
- מספר הודעות שעובדו
- מספר שגיאות
- זמן פעילות (uptime)
- סטטיסטיקות cache (hit rate)
- סטטיסטיקות rate limiting

## 🔒 אבטחה

### הגנות מובנות
- **Input Validation**: ולידציה מלאה של כל קלט משתמש
- **Rate Limiting**: הגבלת קצב בקשות למניעת spam
- **Error Handling**: טיפול בטוח בשגיאות ללא חשיפת מידע רגיש
- **Sanitization**: ניקוי קלט מתווים מסוכנים

### המלצות אבטחה
- שמרו על הטוקן של הבוט בסוד
- השתמשו ב-HTTPS לwebhook
- עדכנו את התלויות באופן קבוע
- הגדירו firewall מתאים

## 🚀 פריסה בפרודקשן

ראו [מדריך פריסה מפורט](DEPLOYMENT.md) להוראות מלאות.

### פריסה מהירה
```bash
# הכנה
cp .env.example .env
# ערכו את .env עם הטוקן האמיתי

# פריסה
./scripts/start.sh

# מעקב
./scripts/status.sh
```

## 🧪 בדיקות

### הרצת כל הבדיקות
```bash
npm test
```

### סוגי בדיקות
- **Unit Tests**: בדיקות רכיבים בודדים
- **Integration Tests**: בדיקות אינטגרציה עם APIs
- **E2E Tests**: בדיקות מקצה לקצה של זרימות משתמש

### כיסוי בדיקות
```bash
npm run test:coverage
```

## 🤝 תרומה לפרויקט

אנו מזמינים תרומות! אנא:

1. **Fork** את הפרויקט
2. צרו **branch** לתכונה שלכם
3. **Commit** את השינויים
4. **Push** ל-branch
5. פתחו **Pull Request**

### קווים מנחים
- כתבו בדיקות לכל תכונה חדשה
- עקבו אחר style guide הקיים
- עדכנו תיעוד רלוונטי
- בדקו שכל הבדיקות עוברות

## 📝 רישיון

פרויקט זה מופץ תחת רישיון MIT. ראו קובץ [LICENSE](LICENSE) לפרטים.

## 🆘 תמיכה

### בעיות נפוצות
- **הבוט לא מגיב**: בדקו שהטוקן נכון ושיש חיבור לאינטרנט
- **שגיאות API**: בדקו שה-API הישראלי זמין
- **בעיות ביצועים**: בדקו הגדרות cache ו-rate limiting

### קבלת עזרה
1. בדקו את [מדריך פתרון בעיות](DEPLOYMENT.md#פתרון-בעיות-נפוצות)
2. חפשו ב-Issues הקיימים
3. פתחו Issue חדש עם פרטי השגיאה

## 📈 סטטיסטיקות פרויקט

- **שפת פיתוח**: JavaScript (Node.js)
- **מסד נתונים**: In-memory (Redis אופציונלי)
- **API חיצוני**: data.gov.il (ממשלת ישראל)
- **פלטפורמה**: Telegram Bot API
- **כיסוי בדיקות**: 90%+

## 🔮 תכונות עתידיות

- [ ] תמיכה בשפות נוספות
- [ ] אינטגרציה עם מסדי נתונים חיצוניים
- [ ] דוחות סטטיסטיקה למנהלים
- [ ] API פומבי לשימוש חיצוני
- [ ] אפליקציית ווב נלווית

---

**נוצר עם ❤️ עבור הקהילה הישראלית**

*בוט זה משתמש בנתונים פומביים של משרד התחבורה הישראלי ואינו קשור רשמית לממשלה*